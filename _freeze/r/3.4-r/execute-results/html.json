{
  "hash": "e6be7f406156718a88f995cd5f4ceb3f",
  "result": {
    "markdown": "---\ntitle: \"3.4 — Multivariate OLS Estimators — Practice\"\nexecute:\n  freeze: auto\n---\n\n\n<p style=\"text-align:center\">\n\n<a target=\"_blank\" href=\"https://metricsF22.classes.ryansafner.com/files/r-qmd/3_4_multivariate_ols_estimators.qmd\"><i class=\"fas fa-file-archive\"></i>[Quarto file</a>]{.btn .btn-primary .btn-lg} <a target=\"_blank\" https://rstudio.cloud/spaces/270168/content/4844198\"><i class=\"fas fa-cloud\"></i>[R Studio Cloud</a>]{.btn .btn-primary .btn-lg}\n\n</p>\n\n<!--## Answers\n\n<p style=\"text-align:center\"><a target=\"_blank\" href=\"https://metricsF22.classes.ryansafner.com/files/r-qmd/2_7_hypothesis_testing_for_regression_answers.html\"><span class=\"btn btn-primary btn-lg\"><i class=\"fas fa-external-link-square-alt\"></i> Answer Key (html) </a></span> <a target=\"_blank\" href=\"https://metricsF22.classes.ryansafner.com/files/r-qmd/2_7_hypothesis_testing_for_regression_answers.qmd\"><span class=\"btn btn-primary btn-lg\"><i class=\"fas fa-file-archive\"></i> Answer Key (.qmd)</a></span></p>\n\n-->\n\nDownload and read in (`read_csv`) the data below.\n\n- [<i class=\"fas fa-table\"></i> `speeding_tickets.csv`](https://metricsf22.classes.ryansafner.com/files/data/speeding_tickets.csv)\n\nThis data comes from a paper by Makowsky and Strattman (2009) that we will examine later. Even though state law sets a formula for tickets based on how fast a person was driving, police officers in practice often deviate from that formula. This dataset includes information on all traffic stops. An amount for the fine is given only for observations in which the police officer decided to assess a fine. There are a number of variables in this dataset, but the one's we'll look at are:\n\n| Variable | Description |\n|----------|-------------|\n| `Amount` | Amount of fine (in dollars) assessed for speeding |\n| `Age` | Age of speeding driver (in years) |\n| `MPHover` | Miles per hour over the speed limit |\n\nWe want to explore who gets fines, and how much. We'll come back to the other variables (which are categorical) in this dataset in later lessons.\n\n## Question 1\n*How does the age of a driver affect the amount of the fine*? Make a scatterplot of the `Amount` of the fine (`y`) and the driver's `Age` (`x`) along with a regression line.\n\n## Question 2\nNext, we'll want to find the correlation between `Amount` and `Age`. Do this first.\n\nThen notice that it won't work. This is because there are a lot of `NA`s (missing data) for `Amount` (if tried to get the `mean()` of `Amount`, it would do the same thing.\n\nYou can verify the `NA`s with:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata %>% # use your named dataframe!\n  select(Amount) %>%\n  summary()\n\n# OR\n# data %>% count(Amount) # but this has a lot of rows!\n```\n:::\n\nIn order to run a correlation, we need to drop or ignore all of the `NA`s. You could `filter()` the data: \n\n\n::: {.cell}\n\n```{.r .cell-code}\n# this would OVERWRITE data\ndata <- data %>%\n  filter(!is.na(Amount)) # remove all NAs\n```\n:::\n\n\nOr, if you don't want to change your data, the `cor()` command allows you to set `use = \"pairwise.complete.obs\"` as an argument.\n\n## Question 3\nWe want to estimate the following model:\n\n\n$$\\widehat{\\text{Amount}_i}= \\hat{\\beta_0}+\\hat{\\beta_1}\\text{Age}_i$$\n\n\nRun a regression, and save it as an object. Then get a `summary()` of it.\n\n### Part A\nWrite out the estimated regression equation.\n\n### Part B\nWhat is $\\hat{\\beta_0}$ for this model? What does it mean in the context of our question?\n\n### Part C\nWhat is $\\hat{\\beta_1}$ for this model?  What does it mean in the context of our question?\n\n### Part D \nWhat is the marginal effect of `Age` on `Amount`?\n\n## Question 4\nRedo question 3 with the `broom` package. Try out `tidy()` and `glance()`. This is just to keep you versatile!\n\n## Question 5\nHow big would the difference in expected fine be for two drivers, one 18 years old and one 40 years old?\n\n## Question 6\nNow run the regression again, controlling for speed (`MPHover`).\n\n### Part A\nWrite the new regression equation.\n\n### Part B\nWhat is the marginal effect of `Age` on `Amount`? What happened to it, compared to Question 3D?\n\n### Part C\nWhat is the marginal effect of `MPHover` on `Amount`?\n\n### Part D\nWhat is $\\hat{\\beta_0}$ for our model, and what does it mean in the context of our question?\n\n### Part E\nWhat is the adjusted $\\bar{R}^2$? What does it mean?\n\n## Question 7\nNow suppose both the 18 year old and the 40 year old each went 10 MPH over the speed limit. How big would the difference in expected fine be for the two drivers?\n\n## Question 8\nWhat is the difference in expected fine between two 18 year-olds, one who went 10 MPH over, and one who went 30 MPH over?\n\n## Question 9\nUse the `modelsummary` package's `modelsummary()` command to make a regression table of your two regressions: the one from question 3, and the one from question 6.\n\n## Question 10\nAre our two independent variables multicollinear? Do younger people tend to drive faster? \n\n### Part A\nGet the correlation between `Age` and `MPHover`.\n\n### Part B\nMake a scatterplot of `MPHover` (`y`) on `Age` (`x`).\n\n### Part C\nRun an auxiliary regression of `MPHover` on `Age`.\n\n### Part D\nInterpret the coefficient on `Age` from this regression.\n\n### Part E\nLook at your regression table in question 10. What happened to the standard error on `Age`? Why (consider the formula for variance of $\\hat{\\beta_1})$?\n\n### Part F\nCalculate the Variance Inflation Factor (VIF) using the `car` package's `vif()` command. Run it on your regression object saved from Question 7.\n\n### Part G\nCalculate the VIF manually, using what you learned in this question.\n\n## Question 11\nLet's now think about the omitted variable bias. Suppose the “true” model is the one we ran from Question 7.\n\n### Part A\nDo you suppose that `MPHover` fits the two criteria for omitted variable bias?\n\n### Part B\nLook at the regression we ran in Question 4. Consider this the “omitted” regression, where we left out `MPHover`. Does our estimate of the marginal effect of `Age` on `Amount` overstate or understate the *true* marginal effect?\n\n### Part C\nUse the “true” model (Question 7), the “omitted” regression (Question 3), and our “auxiliary” regression (Question 10) to identify each of the following parameters that describe our biased estimate of the marginal effect of `Age` on `Amount`:\n\n$$\\alpha_1=\\beta_1+\\beta_2\\delta_1$$\n\n\nSee the notation I used in [class](https://metricsF22.classes.ryansafner.com/slides/3.4-slides.html#measuring-ovb-in-our-class-size-example-iv-5).\n\n### Part D\nFrom your answer in part C, how large is the omitted variable bias from leaving out `MPHover`?\n\n## Question 12\nMake a coefficient plot of your coefficients from the regression in Question 6. The package `modelsummary` (which you will need to install and load) has a great command `modelplot()` to do this on your regression object.",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}